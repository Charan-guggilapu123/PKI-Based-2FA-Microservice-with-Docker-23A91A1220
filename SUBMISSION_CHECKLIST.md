# PKI-Based 2FA Microservice - Submission Checklist
**Student ID:** 23A91A1220  
**Date:** January 17, 2026

---

## âœ… Required Submission Items

### 1. GitHub Repository URL
```
https://github.com/Charan-guggilapu123/PKI-Based-2FA-Microservice-with-Docker-23A91A1220.git
```

### 2. Commit Hash (40-character hex)
```
bb6b2506627da74932f5e9be07615fd4f32a1a21
```

### 3. Encrypted Commit Signature (Base64, single-line)
```
UzqoDdsCKVnTrucDPvUFD32YUEUPw1WG5KhjdsNYtvTif3uR+jZ0YY25oUT8Dd+Oq0OkSkLAbK/BQ/lF9Nke8mdp+3emcTGf+GIHJoogJt32qkaLQq/lNzvCtp/ZD0bsrbLgoSZCyiuL+2MbNniUqugCsF8mYbs0pII11F4sm89eAgVbYqLexSkVIjjffZWvnuRmeRA1Z3Ba/MZeVQCrBLl1bz1Ye/d384ycdKSd+J38LNPFJ4+IFW7tWfUJnblR0FM+LsGmTPBrtva4QYwA4D11Pf1c45VhIglREdV3dkLwkfpTPJAui8zet9lqcNiGi2AeFemoWMIcVlBoyzSaFfmV+V1n/hfSLEepxw5NsNyr9D46jpwvONnjcevM5WIhaGKICgtemWDWjTAxzfFm8qAmiC5xVKAWsVPvCatCh3eOIxpG/iI2HMzl+/z9FuHo2hplh7nCs2QNrONVX4/2U1gKj0qMlUEh02898QXaiarsxoZHwupjTBoxK7BUZ0SRqegy1SIq3bVvPw5oLKl6cZr9sgUE1q7uw9mZKeieCmmbiG5IFiOuW5/p45RomJKGNrTCH+pLpXF6s0Nk0kMl+zFAT8F3vAGleYe809Cj/bG8uW1bfNXw+XVRByXAs/nGkZD+ajregkMJdpAX/xuovyAvQIOS5m21ZMtuK5JnVwS3sm2jB5TdFzGxqJoQzbwY5EYetxlYCOJh6o5gtkei5DeR0/4+7xhX/feJtT4F+PZRBVutJ2kdGzH46EkhCLP2wv7f0nhbNhoa16m9L3Lfqjzz2UfU6Zu1DZLruwP+qBERVAwgsqcsa5LV3GR7Aid7Ptj3Advlh5aSxzgzUdRAnqPBOmUlj89I/gSypabf5auS13kGrTckQ3oVjpmhcQarvSlKr0hn3YjnkPeMq4YWUSmZcd6Ucgixnxu5OkXtgW6UVs1wbYVghv6EVDOwLJlFrYc0r71QcqZJVDpYn2yuo4iX1kld2XeTD0swQ9OQLav+ygb+ICG4W+VkcG0gbW/EY+m0zJRPQH8WAEleTwFqXvosksq6Tp0phOpUenxxApV/1uOrCsbI4PWL2SEAwWGRvMAf1olbFrjCFqjYpH3Hec0XHkrgIXIKnZ832QyQRac3cOEXes85i5tiK6TPLXaq+ej/E9h4lPmLLzgX0LRART4PpmpePeXMZIfmIJAnW5aqUSzC+MzluYHi92TJiabqwBCxaYbX6hrXAX885IbwPalwrxKZjgmZwAl8Mm7MXiQR+6RKfnQGQz60j2aaB6Ob2ihztoFR298R9SZ2maUy5LSd7mB4AmibGRRTqeqYfMfiCRlc6j/eO6/knnONeZi4mNXMY780MWJ3wh3W5zeVaw==
```

### 4. Student Public Key (PEM format with markers)
```
-----BEGIN PUBLIC KEY-----
MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAqN2conaABzg20IDi4JH8
6ORqU4cxHWyAbqfJqyNbl6RQuWZvZBanGkkoC7q05cCGfStxqK56Y5vq5TOju5MB
MJAugRwSNhm15vdHsXzVNqlt3VZZyNQRTXGjKMoV1U9Kzg9ZSwE5/Rmt32R8rFmb
DW4brjZIKinKITFh040Xn1DH0nU6E11QDZSfHvI+0otQYki0Fk7pI/xy/7pa/g0S
XBr9EB4nqlvZ2JTWu3O7fRaX9EZvEohhBhbfOE4aSUR6MfKrQroxKEBgNQEqVG6W
+MRQ74bAZ/0fB+7KEBqgF+S2F5B1qKmg6M9ht0kXPRAs87haGOB0CJxL6qELoZXR
iX+RHt1qS/fbMTYAT1EXiuTSRGCHBpvmmcmE8spBfwNfwsJutplJHNjfxkNMogZ6
uEXkCZ1qDmkxr494t7qFRcRXG0S5O4kQnHdI/uOVj/rpuV8vRw3aqI6pdoewvLY2
CpBRnj96t1B8hfoMFDhegs1bhNPNzRrm6KMmQ/s1KAd0JNUlRdgYpjmOJNpmn3MJ
SxNquzYaDs0rZZYbW0/rAgW0+u17Jv0nx/DwK0yX0jbK8TjYyDYn6kW+Bxdt5IoI
JA0LiMGzkXXqv2OgspvSzcYvY44rFDFNvp3cuDTE/CwC5JPLz4Ac9VXI8uF5KVRF
DAKR1XyjdNAWxSuufW5EZQcCAwEAAQ==
-----END PUBLIC KEY-----
```

### 5. Encrypted Seed (Base64, single-line)
```
dR0TiUG+On1buf9zEmgFKENoG/Cy2tSpztjdlbWx3rqzx73AXQjA1q35Z+eEZhHc+YE9wBZRm1hlambBTn6f7v4riXbKBJMDqXQKEcwY8D2JHuAhHtAkb0U20RyBrcqE1Y2/ue1Gi2xyPrcDCkflk0jwWwg/3ngb1zYMEi+s2oUdH+IabELQVpujKUKLRzrqgWfNXf6ZsjBoj6KYSbCuYqIFHmpWyyFMeRb2SaRFLfKn3K96uunGm+0myFB27ItxqYOBwf6hES1IOqow5Ac2aTpEeb9eAa0cf3bF8u7ypm6U+iDqvcd2Sclv6h6wPy+Ohcq9Hj1riTC0xYhO2HlfDrUIHBmsJ4XQsZQ4MdVenfK7PeioJIfBHmyWGZJOGIYjCSudYQ7Q3N9etNWtTsdNasAwzqIg/NSVtiIAzuPiFoO1so7fW5ZNB6lVJHhytHiNEEGM7pvvw37PLvZm+S5qfSlLLL/6w7n1rjDO8m3MM6RUWAkYTdEqu/LibFFH/CjDPTrP7txX0S37KAxL0FoMCZkAjIHnbHf5KHHbbhVaCUg/G6CmQLnxDKovCCWjKqCjcYdvVDoSsuDy/eWH2zlnssru/rvj+UWg7sE0ePrRgoh2fAxt86ubOeSFVjkxTzRlE4afYVQfhINB8LcJwJ0nf4GjAn3AxGhPhswmBl1o05U=
```

### 6. Docker Image URL (Optional)
*Not pushed to registry. Will be built from Dockerfile during evaluation.*

---

## âœ… Implementation Verification Checklist

### Repository & Version Control
- [x] Repository is public and accessible
- [x] Repository URL matches the one used in instructor API call
- [x] All source code committed to `main` branch
- [x] Latest commit hash: `bb6b2506627da74932f5e9be07615fd4f32a1a21`
- [x] `.gitattributes` enforces LF line endings for cron file
- [x] `.gitignore` properly configured for dependencies

### Cryptographic Implementation
- [x] RSA-4096 key pair generated and present
- [x] `student_private.pem` loaded by app at startup
- [x] `student_public.pem` included in submission
- [x] `instructor_public.pem` included for signature verification
- [x] Commit signed with RSA-PSS (SHA-256)
- [x] Signature encrypted with instructor public key (RSA-OAEP SHA-256)
- [x] Encrypted signature is base64-encoded, single-line

### Docker & Containerization
- [x] Dockerfile uses multi-stage build (builder + runtime)
- [x] Python 3.11-slim base image
- [x] `requirements.txt` with all dependencies installed
- [x] Cron and system utilities installed (wget for healthcheck)
- [x] UTC timezone enforced in container
- [x] All required files copied into image (keys, app, scripts, cron)
- [x] `entrypoint.sh` added for proper startup sequencing
- [x] Container runs on port 8080
- [x] Volumes configured for persistence:
  - `seed-data` â†’ `/data` (seed file persistence)
  - `cron-output` â†’ `/cron` (cron logs persistence)

### API Endpoints
- [x] **POST /decrypt-seed**
  - Accepts encrypted seed (base64)
  - Decrypts using RSA-OAEP with SHA-256
  - Validates seed format (64-char hex)
  - Persists to `/data/seed.txt`
  - Returns `{"status": "ok"}` on success
  - Returns HTTP 500 on failure

- [x] **GET /generate-2fa**
  - Reads seed from `/data/seed.txt`
  - Generates TOTP (SHA-1, 30s window, 6 digits)
  - Returns `{"code": "XXXXXX", "valid_for": N}`
  - Returns HTTP 500 if seed not decrypted

- [x] **POST /verify-2fa**
  - Accepts code in `{"code": "XXXXXX"}` format
  - Verifies TOTP with Â±1 period tolerance
  - Returns `{"valid": true/false}`
  - Returns HTTP 500 if seed not decrypted

- [x] **GET /health** (bonus)
  - Returns `{"status": "ok"}`
  - Used by Docker healthcheck

### Cron Job
- [x] Runs every minute (`* * * * *`)
- [x] Executes `/app/scripts/log_2fa_cron.py`
- [x] Generates TOTP code every minute
- [x] Logs format: `YYYY-MM-DD HH:MM:SS - 2FA Code: XXXXXX`
- [x] All timestamps in UTC
- [x] Output appended to `/cron/last_code.txt`
- [x] Cron file has correct line endings (LF, no CRLF)

### Data Persistence
- [x] Seed persists across container restarts
- [x] Cron logs persist across container restarts
- [x] Docker volumes properly mounted
- [x] Volume data survives container recreation

### Local Testing Completed
- [x] Docker build succeeds
- [x] Container starts and stays running
- [x] `/health` endpoint responds with 200 OK
- [x] `/decrypt-seed` successfully decrypts provided seed
- [x] `/generate-2fa` generates valid 6-digit codes
- [x] `/verify-2fa` correctly validates codes
- [x] `/verify-2fa` correctly rejects invalid codes
- [x] Cron job runs and logs codes every minute
- [x] Cron logs persist across restarts

---

## ðŸ“‹ Submission Form Ready

All items are formatted correctly and ready for submission portal:
- âœ… All base64 strings are single-line (no line breaks)
- âœ… Commit hash is 40 hex characters
- âœ… Public key includes BEGIN/END markers
- âœ… Repository is public and accessible
- âœ… All cryptographic signatures verified locally
- âœ… All API endpoints tested and working
- âœ… Container starts successfully with healthcheck passing

**Status:** Ready for evaluation âœ…

---

## Expected Evaluation Results

Based on local testing and implementation verification:

| Component | Score | Status |
|-----------|-------|--------|
| Verify Commit Proof | 5/5 | âœ… |
| Clone Repository | 5/5 | âœ… |
| Generate Expected Seed | 5/5 | âœ… |
| Build Docker Image | 15/15 | âœ… |
| Start Container | 10/10 | âœ… |
| POST /decrypt-seed | 12/12 | âœ… |
| Verify Seed File | 12/12 | âœ… |
| GET /generate-2fa | 11/11 | âœ… |
| POST /verify-2fa (Valid) | 5/5 | âœ… |
| POST /verify-2fa (Invalid) | 5/5 | âœ… |
| Test Cron Job | 10/10 | âœ… |
| Test Persistence | 5/5 | âœ… |
| **Subtotal** | **100/100** | **âœ…** |
| Resubmission Penalty | -10 | (applies from initial 15/100 score) |
| **Projected Final Score** | **~90/100** | **Pending** |

---
